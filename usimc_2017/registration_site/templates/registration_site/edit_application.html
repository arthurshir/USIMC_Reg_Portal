{% extends 'registration_site/application_form.html' %}
{% load static %}
{% load crispy_forms_tags %}

<!-- Head -->
{% block head %}
<script src="{% static 'registration_site/jquery.formset.js' %}"></script>
<script src="{% static 'registration_site/edit_application.js' %}"></script>
{% endblock %}

<!-- Title -->
{% block title %}USIMC International Music Competition{% endblock %}
{% block subtitle %}Hosted by CMTANC{% endblock %}

<!-- Nav Button -->
{% block rightNavButton %}{% endblock %}

<!-- Main Content -->
{% block form_title %}
  Edit Application
{% endblock %}
{% block form %}
  <div class="flex-start">
    <a href="{% url 'registration_site:dashboard' %}" class="btn btn-default">Back</a>
  </div>
  <div style="height: 20px"></div>
  <form action="." method="post">
    {% csrf_token %}
    <div class="flex-column flex-center">
      <form id="myForm" method="post" action="">
          <table id="performer-table" border="0" cellpadding="0" cellspacing="0">
              <tbody>
                  {% for form in performer_formset.forms %}
                  <tr>
                      <td>
                        {{ form.id }}
                        {% if form.instance.pk %}{{ form.DELETE }}{% endif %}
                      </td>
                      <td>
                        {{ form.first_name.label_tag }}
                        {{ form.first_name }}
                        {{ form.middle_name.label_tag }}
                        {{ form.middle_name }}
                        {{ form.last_name.label_tag }}
                        {{ form.last_name }}
                        {{ form.email.label_tag }}
                        {{ form.email }}
                        {{ form.phone_number.label_tag }}
                        {{ form.phone_number }}
                        {{ form.instrument.label_tag }}
                        {{ form.instrument }}
                        {{ form.teacher_first_name.label_tag }}
                        {{ form.teacher_first_name }}
                        {{ form.teacher_middle_name.label_tag }}
                        {{ form.teacher_middle_name }}
                        {{ form.teacher_last_name.label_tag }}
                        {{ form.teacher_last_name }}
                        {{ form.teacher_code.label_tag }}
                        {{ form.teacher_code }}
                      </td>
                  </tr>
                  {% endfor %}
              </tbody>
          </table>
          <div>
            {{ performer_formset.management_form }}
          </div>

          <table id="piece-table" border="0" cellpadding="0" cellspacing="0">
              <tbody>
                  {% for form in piece_formset.forms %}
                  <tr>
                      <td>
                        {{ form.id }}
                        {% if form.instance.pk %}{{ form.DELETE }}{% endif %}
                      </td>
                      <td>
                        {{ form.title.label_tag}}
                        {{ form.title }}
                        {{ form.composer.label_tag}}
                        {{ form.composer }}
                        {{ form.catalogue.label_tag}}
                        {{ form.catalogue }}
                        {{ form.is_chinese.label_tag}}
                        {{ form.is_chinese }}
                      </td>
                  </tr>
                  {% endfor %}
              </tbody>
          </table>
          <div>
            {{ piece_formset.management_form }}
          </div>
          <input type="submit" value="Save" class="btn btn-success">
      </form>
    </div>
  </form>
{% endblock %}
