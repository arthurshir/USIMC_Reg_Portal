{% extends 'registration_site/application_form.html' %}
{% load static %}
{% load crispy_forms_tags %}

<!-- Head -->
{% block head %}
<script src="{% static 'registration_site/jquery.formset.js' %}"></script>
<script src="{% static 'registration_site/edit_ensemble_application.js' %}"></script>
{% endblock %}

<!-- Title -->
{% block title %}USIMC International Music Competition{% endblock %}
{% block subtitle %}Hosted by CMTANC{% endblock %}

<!-- Nav Button -->
{% block rightNavButton %}{% endblock %}

<!-- Main Content -->
{% block form_title %}
  Edit Application
{% endblock %}
{% block form %}

  <div class="flex-start">
    <a href="{% url 'registration_site:dashboard' %}" class="btn btn-default">Back</a>
  </div>
  <div style="height: 20px"></div>
  <form action="." method="post">
    {% csrf_token %}
    <div class="flex-column flex-center" style="max-width: 800px;">
      <form id="myForm" method="post" action="">
          <h3>Parent</h3>
          {{ contact_form|crispy }}

          <h3>Teacher</h3>
          {{ teacher_form|crispy }}

          <h3>Competitor</h3>
          {{ lead_competitor_form|crispy }}

          <h3>Performers</h3>
          <table id="ensemble-member-table" border="0" cellpadding="0" cellspacing="0">
              <tbody>
                  {% for form in ensemble_member_formset.forms %}
                  <tr>
                      <td>
                        {{ form.id }}
                        {% if form.instance.pk %}{{ form.DELETE }}{% endif %}
                      </td>
                      <td>
                        {{ form.first_name.label_tag }}
                        {{ form.first_name }}
                        {{ form.last_name.label_tag }}
                        {{ form.last_name }}
                        {{ form.email.label_tag }}
                        {{ form.email }}
                        {{ form.phone_number.label_tag }}
                        {{ form.phone_number }}
                        {{ form.instrument.label_tag }}
                        {{ form.instrument }}
                        {{ form.birthday.label_tag }}
                        {{ form.birthday }}
                      </td>
                  </tr>
                  {% endfor %}
              </tbody>
          </table>
          <div>
            {{ ensemble_member_formset.management_form }}
          </div>

          <h3>Pieces</h3>
          <table id="piece-table" border="0" cellpadding="0" cellspacing="0">
              <tbody>
                  {% for form in piece_formset.forms %}
                  <tr>
                      <td>
                        {{ form.id }}
                        {% if form.instance.pk %}{{ form.DELETE }}{% endif %}
                      </td>
                      <td>
                        {{ form.title.label_tag }}
                        {{ form.title }}
                        {{ form.opus.label_tag }}
                        {{ form.opus }}
                        {{ form.movement.label_tag }}
                        {{ form.movement }}
                        {{ form.composer.label_tag }}
                        {{ form.composer }}
                        {{ form.length.label_tag }}
                        {{ form.length }}
                        {{ form.is_chinese.label_tag }}
                        {{ form.is_chinese }}
                      </td>
                  </tr>
                  {% endfor %}
              </tbody>
          </table>
          <div>
            {{ piece_formset.management_form }}
          </div>
          <input type="submit" value="Save" class="btn btn-success">
      </form>
    </div>
  </form>
{% endblock %}
